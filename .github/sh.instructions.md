---
applyTo: ".sh"
---
# Shell Script Copilot Instruction

- shbangは`bash`とする。
- 実行オプションの基本は`-eu -o pipefail`とする。
- 原則として関数内に処理を記述する。
- 関数の役割は１つになるようにする。
- エントリ関数はmainを利用する。
- mainでは必須の引数を`:?`で指定する。
- 環境変数はmainの引数として受け取り、直接利用しない。
- main関数の記述は最下部とする。
- 関数の呼び出しは下から上にする。
- 関数内の変数はローカル変数とする。
- ローカル変数`local`は原則読み込み専用(`-r`指定)とする。
- 変数は`${}`で必ず展開する。
- 関数の引数はローカル変数に代入して利用する。
- コマンドのオプションはロングオプションを利用する。
- 未定義の場合の処理など、変数展開を積極的に利用する。
- 使われない変数は定義しない。
- ライブラリの場合
  - main関数は定義しない。
